<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">
<html><head>
  <meta http-equiv="content-type" content="text/html; charset=windows-1252">
  <title>CSCI-250 Project</title>
</head>
<body>
<div style="text-align: center;"><big><big><span style="font-weight: bold;">Concepts of Computer Systems (CSCI 250)</span><br style="font-weight: bold;">
<!-- PAW change quarter number -->
<span style="font-weight: bold;">Project: Spring, 20135<br>
<br style="font-weight: bold;">
Due Dates:
<br>
</span><span style="font-weight: bold; color: rgb(255, 0, 0);">
<!-- PAW change due date -->
<!--
Sections 01: Tuesday Feb 15, 2011
-->
Section 01, 02, 03: Monday May 5<br>
</span><br style="color: rgb(255, 0, 0);">
</big></big></div>
<br>
<hr style="width: 100%; height: 2px;"><br style="font-weight: bold;">

<h2>Goals and Objectives</h2>
The goal of this project is to write a complete MIPS program from
scratch.<br>

<h2>Overview</h2>
For this project you will be writing a MIPS assembly program to solve a
Skyscrapers puzzle. <br>
<br>
<table style="margin-left: auto; margin-right: auto; text-align: left;" cellpadding="0" cellspacing="20" border="0">
  <tbody>
    <tr>
      <td style="vertical-align: top; text-align: center;">
	<img title="skyscrapers.gif" alt="Skyscraper puzzle from http://www.mathfair.com/images/skyscrapers.gif" src="CSCI-250%20Project_files/skyscrapers.gif" align="middle"><br>
<!--
 src="skyscrapers.gif" style="width: 173px; height: 173px;"
-->
      </td>
    </tr>
    <tr>
      <td style="vertical-align: top; text-align: center;">
<small>Skyscraper puzzle image<br>
      </small></td>
    </tr>
  </tbody>
</table>
<div style="text-align: center;"><br>
</div>
The Skyscrapers puzzle
will be given to you as an ASCII text stream (which can be typed in on
the command line or redirected from a file). You will print out the
unsolved puzzle, then a solved version with all the buildings placed.
<br>
<br>
For information about Skyscrapers puzzles, and how to solve them, go to 
<a href="http://www.brainbashers.com/skyscrapers.asp">BrainBashers.com</a>.
or
<a href="http://logicgames.blogspot.com/2008/06/skyscraper.html">
PC logic games</a>
&nbsp; <br>

<h2>Rules of Skyscrapers</h2>
In a town of size <i>n</i> there are <i>n</i><sup>2</sup> skyscrapers 
on a <i>n</i>-by-<i>n</i> 
grid. In each row
or column, the buildings range in height from 1 story to <i>n</i> stories.
<p>
<table>
<tbody><tr>
<td><img src="CSCI-250%20Project_files/skyscrapersee.gif"> 
</td><td>
If you stand outside the grid and look down a row (or column), a
skyscraper in that row will be hidden from view if there is a taller one
in front of it. 
In the picture to the left, you could see two
skyscrapers if you were standing at one end of the row and and three
skyscrapers if you were standing at the other end.
</td></tr>
</tbody></table>
</p><p>
Your aim is to
place buildings in every square of the city, in such a way that the
following conditions are met: 
</p><ul>
<li>No number is repeated in any row or column.
</li><li>The numbers around the outside tell you how many buildings can be
seen along that row (or column).
</li><li>If there is no number along the outside for a row/column that means
that there can be any number of buildings can be seen from that spot.
</li><li>Some blocks of the city may already have a building placed in them,
this building can't change.
</li></ul>

<h2>Input Specification</h2>
The puzzle will be provided to you on STDIN (i.e., as if a user were
typing it in at the console).&nbsp; 
The input can be thought of as being broken up into a number of types
(in actually the input just come in as a long stream of integers, you will
just interpret different input differently based on what you are looking
for next).  Note that you can assume all input values are integers, and
you will be provided with correct number of inputs.  You
can not assume the value of the inputs are correct.  Below you will find
the definition of the inputs and the error that you will need to
detect for each.
<p>
<table>
<tbody><tr>
<td>
The first value entered will be the board size 
(we will call the board size "<b><i>n</i></b>" from this point on).  
The legal range for the
size is between 3 and 8 inclusively.  If the board size is not within
that range, your program
should print the following error message and terminate.
<p>
</p><ul>
  <table style="text-align: left; width: 500px;" cellpadding="2" cellspacing="2" border="1">
    <caption align="bottom">Error message 1<br>
    </caption>
    <tbody>
      <tr>
        <td style="vertical-align: top;">
          <font face="courier new" size="-1">
		Invalid board size, Skyscrapers terminating
	  </font>
	</td> 
      </tr>
    </tbody>
  </table>
</ul>
<p>
Next you will have 4 set of <b><i>n</i></b> input values that will be
used as the number of visible building when looking down/up/side-to-side
along the rows/column of the board.  The order that the sets of visible
buildings will be entered is:
</p><ul>
<li>Number of visible buildings seen looking down the columns from North
</li><li>Number of visible buildings seen looking across the rows from East
</li><li>Number of visible buildings seen looking up the columns from South
</li><li>Number of visible buildings seen looking across the rows from West
</li></ul>
The number of visible buildings along a row/column must be between
0 and <b><i>n</i></b> inclusively.  
Note that the value 0 here means
that there is no clue for this row/column.
If a visible building count for a row/column is not within
this range, then your program
should print the following error message and terminate.
<p>
</p><ul>
  <table style="text-align: left; width: 500px;" cellpadding="2" cellspacing="2" border="1">
    <caption align="bottom">Error message 2<br>
    </caption>
    <tbody>
      <tr>
        <td style="vertical-align: top;">
          <font face="courier new" size="-1">
		Illegal input value, Skyscrapers terminating
	  </font>
        </td>
      </tr>
    </tbody>
  </table>
</ul>
<p>
The next value in the input will be the number of pre-placed (fixed)
buildings in the puzzle
(we will call the number of fixed buildings "<b><i>c</i></b>" 
from this point on).  
If the number of fixed buildings specified is less than 0, 
then your program
should print the following error message and terminate.
</p><p>
</p><ul>
  <table style="text-align: left; width: 500px;" cellpadding="2" cellspacing="2" border="1">
    <caption align="bottom">Error message 3<br>
    </caption>
    <tbody>
      <tr>
        <td style="vertical-align: top;">
          <font face="courier new" size="-1">
		Invalid number of fixed values, Skyscrapers terminating
	  </font>
        </td>
      </tr>
    </tbody>
  </table>
</ul>
<p>
The next <b><i>c</i></b> triples of inputs will be the location and
value for the fixed buildings on the puzzle.
Within each triple of inputs, the first value is the
row, the second is the column and the third is the height 
for building at that location on the puzzle.
Both the
row and the column location must be between 0 and (<b><i>n</i></b>-1),
the locations are numbered from the upper-left corner starting with 0. 
The building height must be in the range of 1 and <b><i>n</i></b>.
<!--
Note you should read in all three values before you check them for 
correctness.  
-->
If the row/column of the location or the height of the fixed building 
are not within that range, then your program
should print the following error message and terminate.
</p><p>
</p><ul>
  <table style="text-align: left; width: 500px;" cellpadding="2" cellspacing="2" border="1">
    <caption align="bottom">Error message 4<br>
    </caption>
    <tbody>
      <tr>
        <td style="vertical-align: top;">
          <font face="courier new" size="-1">
		Illegal fixed input values, Skyscrapers terminating
          </font>
        </td>
      </tr>
    </tbody>
  </table>
</ul>
</td>
<td>
<!-- PAW -->
<img src="CSCI-250%20Project_files/input_exp.gif" style="width: 450px">
</td>
</tr>
</tbody></table>

<span style="font-style: italic;"></span>Here is a&nbsp;<a href="http://www.cs.rit.edu/%7Ecsci250/project/135/sample_input.txt"><span style="font-family: monospace;">sample
input file</span></a>.<br>

</p><h2>Output Specification</h2>
Your program output will have the following parts:<br>
<h4><span style="font-weight: bold;">1) The program banner</span></h4>
The first thing you should output is a blank line, then the program
banner. It looks like
the following: <br>
<div style="margin-left: 40px;">
<pre>*******************
**  SKYSCRAPERS  **
*******************
</pre>
</div>

After the program banner, leave one (1) blank line.<br>
<p>
Note that the program banner should be printed even it there is an input
error.
</p><h4><span style="font-weight: bold;">2) The initial puzzle<br>
</span></h4>
If there were no input errors, 
your program should print the words "Initial puzzle" followed by a 
blank line.  Then
print the puzzle, formatted to include a box around the whole puzzle.
The output should look like this:<br>
<div style="margin-left: 40px;">
<pre>Initial Puzzle

    3   2   2    
  +---+---+---+---+
4 |   | 2 |   |   | 1
  +---+---+---+---+
2 |   |   |   |   |  
  +---+---+---+---+
  |   |   |   | 1 | 4
  +---+---+---+---+
2 | 2 |   |   |   | 2
  +---+---+---+---+
    2   3       2
</pre>
</div>
Note that the boxes are made of plus signs 
(<big style="font-weight: bold;"> +</big> ) for corners,
dashes ( <big><span style="font-weight: bold;">-</span></big> ) for
horizontal lines, and vertical bars ( <big><span style="font-weight: bold;">|</span></big> ) for vertical lines.
<p>
Also note that for row/columns that don't have a visible count, a space
should be printed in the counts place.  So if you look at the north
visible counts, you will notice there are 4 spaces after the last "2",
and for the east count, the second row will have 2 spaces after the
vertical bar.
<!--
Also note that the count of visible buildings are placed around the 
puzzle centered in each row/column
(the max visible buildings will never be more than the 
max size of the board, so it will always be a single digit).
-->
</p><p>
After printing the unsolved input puzzle, leave one (1) blank line.<br>

</p><h4>3<span style="font-weight: bold;">) The solved puzzle</span></h4>
Your program should print the words "Final puzzle" followed by a blank
line.&nbsp; Then print out the puzzle with all the buildings added. 
The output should look like:<br>
<div style="margin-left: 40px;">
<pre>Final Puzzle

    3   2   2    
  +---+---+---+---+
4 | 1 | 2 | 3 | 4 | 1
  +---+---+---+---+
2 | 3 | 4 | 1 | 2 |  
  +---+---+---+---+
  | 4 | 3 | 2 | 1 | 4
  +---+---+---+---+
2 | 2 | 1 | 4 | 3 | 2
  +---+---+---+---+
    2   3       2
</pre>
</div>
<p>
After printing the solved puzzle, leave one (1) blank line.
</p><p>
<span style="font-style: italic;">Example 1: complete program output</span><br>
<span style="font-family: monospace;"></span>
</p><div style="margin-left: 40px;">
<table style="text-align: left; width: 259px; height: 400px;" cellpadding="2" cellspacing="2" border="1">
  <tbody>
    <tr>
      <td style="vertical-align: top;">
<pre>
*******************
**  SKYSCRAPERS  **
*******************

Initial Puzzle

    3   2   2    
  +---+---+---+---+
4 |   | 2 |   |   | 1
  +---+---+---+---+
2 |   |   |   |   |  
  +---+---+---+---+
  |   |   |   | 1 | 4
  +---+---+---+---+
2 | 2 |   |   |   | 2
  +---+---+---+---+
    2   3       2

Final Puzzle

    3   2   2    
  +---+---+---+---+
4 | 1 | 2 | 3 | 4 | 1
  +---+---+---+---+
2 | 3 | 4 | 1 | 2 |  
  +---+---+---+---+
  | 4 | 3 | 2 | 1 | 4
  +---+---+---+---+
2 | 2 | 1 | 4 | 3 | 2
  +---+---+---+---+
    2   3       2
</pre>
      </td>
    </tr>
  </tbody>
</table>
<br>
</div>

<h2>Error message</h2>
Your program must be able to detect one error condition, and that is if
you find that the provided input puzzle can not be solved, 
in which case
you should print the following message followed by a blank line,
then your program should terminate.<br>
<br>
<div style="margin-left: 40px;">
<table style="text-align: left; width: 189px; height: 21px;" cellpadding="2" cellspacing="2" border="1">
    <caption align="bottom">Error message 5<br>
    </caption>
  <tbody>
    <tr>
      <td style="vertical-align: top;">
          <font face="courier new" size="-1">
		Impossible Puzzle
          </font>
      </td>
    </tr>
  </tbody>
</table>
<br>
</div>
An impossible puzzle occurs when you have tried every possible building
height for every possible location and none of them are legal.<br>
<p>
Note for an impossible puzzle you should still print the initial label
and puzzle, but you shouldn't print out the final
label or the solved puzzle (since there isn't one).

</p><h2>Algorithm</h2>
The simplest method for writing a solver is to use a brute force
algorithm (backtracking).  There are other algorithms for solving 
a Skyscraper puzzle, 
but they generally require a more difficult algorithm, and such would be
even more painful (than the brute force) to implement in assembly.
<p>
Briefly, a backtracking program would solve a puzzle by placing the 
value (a guess) in the first "guess-able" spot 
<!-- PAW change definition based on the puzzle -->
(a value can represent a a building of height 1 - <b><i>n</i></b>, 
and a "guess-able" spot is a
location on the board without a fixed building in it)
<!-- PAW -->
and checking if it is allowed to be there. If
there are no violations 
<!-- PAW change definition based on the puzzle -->
(checking to make sure there isn't another building in this row/column
of the same height, and checking to make sure that this building does
not place us over the count of visible
buildings along this row and column). 
<!-- PAW -->
then the algorithm advances to the next "guess-able" spot, 
and makes a guess for that spot.
</p><p>
<!-- PAW change definition based on the puzzle -->
Note, the 
tricky part of this algorithm is in the testing if a guess is invalid,
when checking, until you get to the end of a
row/column you can only tell your guess is bad if you go over the
row or column counts.  
It isn't until you make a 
guess for the last square in a row/column, does it then become possible 
to test
to make sure that the count for the row/column exactly match the
number of visible buildings.
<!-- PAW -->
</p><p>
When checking for violations, if it is discovered that any guess you could
make for the spot is 
not allowed, then the algorithm leaves that "guess-able" spot
blank and moves back to the previous spot. The guess that you previously
made for that spot must be invalid, since it can't lead to a solution, 
so you need to change that guess 
to the next possibility value.
</p><p>
The algorithm is repeated until a legal
value is found for all "guess-able" spots (the guesses you made previously
then make up a valid solution) or you find that you can't make any guess
for the first "guess-able" spot (which means that there is no solution to
this puzzle).
</p><p>
<!-- PAW stealing the "brute force algorithm writeup from wikipedia
The basic algorithm works as a depth-first search (DFS).&nbsp; For each
location of the puzzle in turn, you will find a valid value that is
allowed (based on no duplicate value in row/column/3x3).&nbsp; If a
possible value can be found, then you move to the next location, and
repeat.&nbsp; If you find a location where you can't find a value, then
you will fail, and move back into the previous location to see if there
are any other legal values.<br>
<br>
If make it to the last location, and you can find a legal value, then you
have succeeded, and you have a solution<br>
<br>
If you go back to the first location, and you can't find a legal value,
then you have failed, and the puzzle is un-solvable.<br>
<br>
<div style="text-align: center;"><big><span
 style="text-decoration: underline;">The algorithm</span></big><br>
</div>
<br>
<div style="margin-left: 40px;"><span style="font-weight: bold;">Step #1</span>:
TBA<br>
</div>
-->

</p><h2>Activities</h2>
<p>
You may use any file names you wish for your solution, with the
restriction that the file containing your <code>main()</code> function
must be named <code>skyscrapers.asm</code>.
</p><p>
Because the purpose of this project is for you to write a <span style="font-style: italic;">complete </span>assembly
language program, from scratch, no starting materials will be made
available to you. However, here is an input files to get you started.<br>
</p><pre><a href="http://www.cs.rit.edu/%7Ecsci250/project/135/sample_input.txt">sample_input.txt</a></pre>
<p>
You can invoke your program on a data file by typing (using
<span style="font-family: monospace;"> sample_input.txt</span> as an example
input):<br>
</p><blockquote><pre>/home/fac/wrc/bin/rsim skyscrapers.out &lt; sample_input.txt
</pre></blockquote>

<p>
Remember that the output generated when you re-direct input from a file
will not echo the input (including the newlines typed by the
user).
<br>
If you redirect the output to a file:
<br>
</p><blockquote><pre>/home/fac/wrc/bin/rsim skyscrapers.out &lt; sample_input.txt &gt; myout1.txt
</pre></blockquote>
<p>
it should match the output found in:
<br>

</p><pre><a href="http://www.cs.rit.edu/%7Ecsci250/project/135/sample_output.txt">sample_output.txt</a></pre>

<p>
Make sure to spend the time making your output match the description
above and provided in the sample file; we will be using
<code>diff</code>
to compare your output to ours, and
<code>diff</code>
looks for differences in whitespace and extra or missing blank lines as
well as "real" output differences.
You can check for differences yourself with the <tt>vimdiff</tt>
program:
<br>
</p><blockquote><pre>vimdiff myout1.txt sample_output.txt
</pre></blockquote>
<p></p>

<p>
You should also take the time to comment your program.
This includes a file comment at the top of the program with
<strong><em>your name</em></strong>,
your section number,
a description of the project and sections talking about the input and
output of the program.
In the code, make sure that you
use block comments for each function you write, and other comments to
describe what the code is doing.
Refer to the previous experiments for examples of "reasonable"
comments in front of functions and subprograms.
</p>

<h2>Submitting Your Code</h2>
<!-- PAW don't put due date in twice, error prone
The project due date is Tuesday, Feb. 16, at 11:59:59pm. 
-->
<p>
You are free to implement your solution using as many assembly
language source files as you wish, using any names you wish, with
the exception that the file containing your main function must be
named "skyscrapers.asm".  Submit all your source files with the
following command:
<!--
Submit your solution using the following command:<br>
-->
</p><blockquote><pre>try grd-250 project1 skyscrapers.asm <em>other_files.asm</em>
</pre></blockquote>
<p>
where <code><em>other_files.asm</em></code> includes any other assembly
language source files containing parts of your solution.

<!-- PAW moved up to activities
<p>
Because the purpose of this project is for you to write a <span
 style="font-style: italic;">complete </span>assembly
language program, from scratch, no starting materials will be made
available to you. However, here is an input files to get you started.<br>
<pre><a href="sample_input.txt">sample_input.txt</a></pre>
<p>
You can invoke your program on a data file by typing (using
<span style="font-family: monospace;"> sample_input.txt</span> as an example
input):<br>
<blockquote><pre>
/home/fac/wrc/bin/rsim tents.asm &lt; sample_input.txt
</pre></blockquote>

<p>
This should produce the output found in:<br>
<pre><a href="sample_output.txt">sample_output.txt</a></pre>
-->

</p><h2>Grading</h2>

<p>
This project is worth a total of 50 points.
40 points will be awarded based on functionality, and the remaining 10
points will be based on your programming design and style (documentation,
clarity of code, etc.)
</p>

<h2>Tips and Tricks</h2>
<p>
The entry point to your program <strong>must</strong> be a global symbol
named <code>main</code>, or else your program won't link correctly into
a load module and the simulator will refuse to run it.
</p>
<p>
To simplify assembling and linking your program, you can use the
<code>Makefile</code> from experiment 3 as a template for creating a
<code>Makefile</code> for this project
by replacing all occurrences of that experiments object
(<code>.obj</code>) and executable (<code>.out</code>) files with
the ones for your solution.
</p>
<p>
Make intelligent use of functions - e.g., write functions for reading
input, writing output, placing pieces, etc.
If you write your output routines early, you can use them for debugging
as you write the rest of your code.
</p>

<p>
Test <strong>early</strong> and <strong>often</strong>.
Test the functional units of your program as soon as you write them,
using "hard-coded" data (i.e., pre-initialized data areas you set up with
assembler directives rather than data read from the standard input) if
necessary.
<em><strong>
Do not wait until the program is complete to test things!
</strong></em>
That is a sure-fire way to <em><strong>not</strong></em> complete this
assignment on time.
</p>

<!-- PAW
<p>
Test <span style="font-style: italic;">early </span>and <span
 style="font-style: italic;">often</span>. Test functional units as
soon as they are written. This includes your puzzle reading function,
your square lookup and write functions, your change-position function,
etc.<br>
<p>
When you have a bug, <big><span style="color: rgb(255, 0, 0);">step
line-by-line through your code using xspim (or pcspim)</span></big>!
Almost every
bug you have will become obvious once you step through it in a
debugger. <br>
-->
<p>
When you have a bug, use the simulator's built-in debugger to step
through your code.
Run the simulator with the <code>-d</code> option to enable the
debugger,
and the <code>-t</code> option to turn on line-by-line tracing of
instructions.
Be sure to read the
<a href="http://www.cs.rit.edu/%7Ecsci250/documents/rsim.html#using">
using <code>rbug</code></a>
section in the
<a href="http://www.cs.rit.edu/%7Ecsci250/documents/rsim.html">
<em>RSIM Reference Manual</em></a>
to see what commands are available; in particular,
breakpoints, single-stepping, commands for examining memory, and 
register commands will be useful.
</p>
<p>
You can, if you wish, put all of the functions implementing your
solution
in the <code>skyscrapers.asm</code> file.
However, just as in programming using high-level languages, good
programming
practice would be to separate out the parts of
your solution into major functional units, and to put the code for each
unit in a separate source file.
</p>
<p>
Use the provided test input/output file(s) to check your text messages
for correctness.&nbsp; You can run the <tt>diff</tt> or
<tt>vimdiff</tt> programs yourself to see if
there is any differences between your output and ours.&nbsp;
</p><p>
</p><hr style="width: 100%; height: 2px;"><small style="font-style: italic;">Last
updated by paw - Mar 28, 2014</small><br>
<p>


</p></body></html>